<h3>Admin Dashboard</h3>

<%= link_to "All Items", admin_items_path %>

<p>Ordered: <%= @all_orders.ordered.count %> </p>
<p>Paid: <%= @all_orders.paid.count %> </p>
<p>Cancelled: <%= @all_orders.cancelled.count %> </p>
<p>Completed: <%= @all_orders.completed.count %> </p>

<div class="row">
<%= form_tag({}, {:class => "status-form col s2", :method => :get}) do %>
  <%= label_tag "Status:" %>
  <%= select_tag :order_status, options_for_select(["Filter by Order Status", "all", "ordered", "paid", "cancelled", "complete"]), :onchange => "this.form.submit();" %>
  <!-- <%= select_tag :order_status, options_for_select(Order.statuses.keys), :onchange => "this.form.submit();" %> -->
<% end %>
</div>

<ul>
  <% @orders.each do |order| %>
    <div class="order<%= order.id %>">
      <%= link_to "Order: #{order.id}", admin_order_path(order) %>
      <% if order.status == "ordered" %>
        <%= button_to "Cancel", order_cancel_path(order) %>
        <%= button_to "Mark as Paid", order_paid_path(order) %>
      <% elsif order.status == "paid" %>
        <%= button_to "Cancel", order_cancel_path(order) %>
        <%= button_to "Mark as Completed", order_completed_path(order) %>
      <% end  %>
    </div>
    <% end %>
</ul>

<%= link_to "Edit My Account", edit_admin_user_path(current_user) %>
